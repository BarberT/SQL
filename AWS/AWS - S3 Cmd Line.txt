Initialize-AWSDefaultConfiguration
Set-AWSCredential -ProfileName name

Get-S3Directories -DirectoryId 'Main-Bucket'

$S3file = Get-S3Object -BucketName "Main-Bucket" -Key "EC2TEST"
$s3obj = ($S3file.key -split "/")[-1]
writeInfo $s3obj

#EC2TEST


$bucket = "Main-Bucket"
$key = "EC2TEST"
$S3file = Get-S3Object -BucketName "Main-Bucket" -Key $key | where { $_.key -like "*/*.bak"}
$s3obj = ($S3file.key -split "/")
foreach ( $o in $s3obj) {
	write-host $o
}


$bucket = "Main-Bucket"
$key = "EC2TEST"
Get-S3Bucket -BucketName 'Main-Bucket' | Get-S3Object -KeyPrefix 'EC2TEST' | Format-Table BucketName, Key


$bucket = "Main-Bucket"
$key = "EC2TEST"
Get-S3Bucket -BucketName $bucket | Get-S3Object -KeyPrefix $key  | Where-Object { [IO.Path]::GetExtension($_.Key) } | Format-Table BucketName, Key



Get-S3Bucket -BucketName $bucket | Get-S3Object -KeyPrefix $key | Where-Object { [IO.Path]::GetExtension($_.Key) } | Get-Member


$File = Get-S3Bucket -BucketName $bucket | Get-S3Object -KeyPrefix $key | Where-Object { [IO.Path]::GetExtension($_.Key) }
foreach ( $f in $File) {
	write-host $f.key
}

$File = Get-S3Bucket -BucketName $bucket | Get-S3Object -KeyPrefix $key | Where-Object { [IO.Path]::GetExtension($_.Key) }
foreach ( $f in $File) {
	write-host ($f.key -split '/')[-1]
}